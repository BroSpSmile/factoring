<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="layout/layout">
	<div layout:fragment="content">
		<div id="contractInfo">
			<card dis-hover title="搜索条件" style="width:100%">
				<p>
					<i-form ref="searchForm" :model="formInline" :label-width="120" inline>
						<form-item label="合同编号">
							<i-input placeholder="输入合同编号" class="inputw" v-model="formInline.contractCode"></i-input>
						</form-item>
						<form-item label="合同名称">
							<i-input placeholder="输入合同名称" class="inputw" v-model="formInline.contractName"></i-input>
						</form-item>
						<form-item label="状态">
							<i-select class="inputw" v-model="formInline.status" clearable>
								<i-option v-for="status in statusList" :value="status.flowStatus">
									{{ status.flowStatusDesc }}
								</i-option>
							</i-select>
						</form-item>
						<form-item label="项目模式" prop="projectMode">
							<Radio-Group v-model="formInline.projectMode">
								<Radio :label="1">有追索权模式</Radio>
								<Radio :label="2">无追索权模式</Radio>
							</Radio-Group>
						</form-item>
						<row type="flex">
							<i-col span="8" offset="8">
								<i-button type="primary"  icon="ios-search" @click="query()">查询</i-button>
								<i-button type="success"  icon="ios-add" @click="addContract" style="margin-left: 8px">新增</i-button>
							</i-col>
						</row>
					</i-form>
				</p>
			</card>
			<br>
			<card dis-hover title="搜索结果" v-if="showResult">
				<i-table  border :columns="tableColumns" :data="pageInfo.list" ></i-table>
				<br/>
				<page :total="pageInfo.total" show-elevator show-total  :page-size="pageInfo.pageSize" @on-change="pageChange"></page>
			</card>

			<!-- 新增合同 -->
			<modal v-model="modal1" title="新增合同" mask-closable="false" width="700px" fullscreen>
				<div id="modalForm">
					<i-form ref="entityDataForm" :model="addForm" :label-width="80">
						<template>
							<Collapse v-model="panelOpen" accordion>
								<Panel name="0">
									合同基本信息
									<p slot="content">
										<form-item label="合同编号" prop="baseInfo.contractCode">
											<i-input placeholder="输入合同编号" v-model="addForm.baseInfo.contractCode"></i-input>
										</form-item>
										<form-item label="合同名称" prop="baseInfo.contractName">
											<i-input placeholder="输入合同名称" v-model="addForm.baseInfo.contractName"></i-input>
										</form-item>
										<form-item label="项目模式" prop="baseInfo.projectMode">
											<Radio-Group v-model="addForm.baseInfo.projectMode" @on-change="getSignList(addForm.projectMode)">
												<Radio :label="1">有追索权模式</Radio>
												<Radio :label="2">无追索权模式</Radio>
											</Radio-Group>
										</form-item>
									</p>
								</Panel>
								<Panel name="1">
									保理合同
									<p slot="content">史蒂夫·乔布斯（Steve Jobs），1955年2月24日生于美国加利福尼亚州旧金山，美国发明家、企业家、美国苹果公司联合创办人。</p>
								</Panel>
								<Panel name="2">
									应收账款转让确认函
									<p slot="content">斯蒂夫·盖瑞·沃兹尼亚克（Stephen Gary Wozniak），美国电脑工程师，曾与史蒂夫·乔布斯合伙创立苹果电脑（今之苹果公司）。斯蒂夫·盖瑞·沃兹尼亚克曾就读于美国科罗拉多大学，后转学入美国著名高等学府加州大学伯克利分校（UC Berkeley）并获得电机工程及计算机（EECS）本科学位（1987年）。</p>
								</Panel>
								<Panel name="3">
									应收账款转让登录协议
									<p slot="content">乔纳森·伊夫是一位工业设计师，现任Apple公司设计师兼资深副总裁，英国爵士。他曾参与设计了iPod，iMac，iPhone，iPad等众多苹果产品。除了乔布斯，他是对苹果那些著名的产品最有影响力的人。</p>
								</Panel>
								<Panel name="4">
									签署清单
									<div slot="content">
										<Row v-for="(item, index) in addForm.signList"
											 v-if="!item.status"
											 :key="index"
											 :prop="'items.' + index + '.value'">
											<Col span="4">
												{{ index + 1 }}
											</Col>
											<Col span="18">
												{{ item.signListName }}
											</Col>
											<Col span="4" offset="1">
												<i-button @click="handleRemove(index)" style="margin-left: 8px">删除</i-button>
											</Col>
										</Row>
									</div>
								</Panel>
							</Collapse>
						</template>
					</i-form>
				</div>
				<div slot="footer">
					<i-button type="primary" @click="saveContract" style="margin-left: 8px">确定</i-button>
					<i-button  @click="cancel" style="margin-left: 8px">取消</i-button>
				</div>
			</modal>
		</div>
	    <script src="js/contract/contractInfo.js"></script>
	</div>
</html>