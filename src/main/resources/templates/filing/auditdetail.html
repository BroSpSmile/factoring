<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="layout/layout">
<div layout:fragment="content">
    <div id="auditDetail">
        </br>
        <h2>审核进度</h2>
        </br>
        <Steps :current="step">
            <Step v-for="item in steps" :title="item.title" :content="item.content"></Step>
            <!--Step :title="steps[0].title" :content="steps[0].content"></Step>
            <Step :title="steps[1].title" :content="steps[1].content"></Step>
            <Step :title="steps[2].title" :content="steps[2].content"></Step>
            <Step :title="steps[3].title" :content="steps[3].content"></Step-->
        </Steps>
        </br>
        <h2>申请详情</h2>
        </br>
        <div id="filingApplyDetail">
            <i-form ref="entityDataForm" :model="filingInfo" :label-width="100">
                <row>
                    <i-col span="7" offset="1">
                        <form-item label="申请类型">
                            <span>{{filingInfo.applyType}}</span>
                        </form-item>
                    </i-col>
                    <i-col span="7">
                        <form-item label="申请时间">
                            <span>{{filingInfo.applyTime}}</span>
                        </form-item>
                    </i-col>
                    <i-col span="7">
                        <form-item label="申请人">
                            <span>{{filingInfo.applicant}}</span>
                        </form-item>
                    </i-col>
                </row>
                <row>
                    <i-col span="7" offset="1">
                        <form-item label="项目编号">
                            <span>{{filingInfo.projectId}}</span>
                        </form-item>
                    </i-col>
                    <i-col>
                        <form-item label="项目名称">
                            <span>{{filingInfo.projectName}}</span>
                        </form-item>
                    </i-col>
                </row>
                <row>
                    <i-col offset="1">
                        <form-item label="归档清单">
                            <div v-if="isItemExist('1')"><span>股东会决议</span></br></div>
                            <div v-if="isItemExist('2')"><span>尽调报告之红杉资本创始人</span></br></div>
                            <div v-if="isItemExist('3')"><span>尽职调查报告</span></br></div>
                            <div v-if="isItemExist('4')"><span>党总支（扩大）会议纪要</span></br></div>
                            <div v-if="isItemExist('5')"><span>董事会会议纪要</span></br></div>
                            <div v-if="isItemExist('6')"><span>内部风控防控报告</span></br></div>
                            <div v-if="isItemExist('7')"><span>外部风控防控报告</span></br></div>
                            <div v-if="isItemExist('8')"><span>保理合同</span></br></div>
                        </form-item>
                    </i-col>
                </row>
                <row>
                    <i-col offset="1">
                        <form-item label="归档文件">
                            <Tag v-for="item in filingInfo.items" @click.native="download(item.itemValue)">
                                {{item.itemName}}
                            </Tag>
                        </form-item>
                    </i-col>
                </row>
                <row type="flex" justify="end">
                    <i-col span="9" offset="1" v-if="!isView">
                        <i-button type="" @click="auditRejectModel" style="margin:0 8px 0 30px">审核驳回</i-button>
                        <i-button type="success" @click="auditPass" v-if="!isLastAuditStep">审核通过</i-button>
                    </i-col>
                    <i-col span="6" offset="8">
                        <i-button type="success" @click="filingComplete" v-if="!isView&isLastAuditStep">归档完成</i-button>
                        <i-button type="primary" @click="cancel" style="margin:0 8px">返回</i-button>
                    </i-col>
                </row>
            </i-form>
        </div>
        </br>
        <h2>审批详情</h2>
        </br>
        <input th:value="${id}" id="projectId" style="display:none"></input>
        <input th:value="${view}" id="isView" style="display:none"></input>
        <input th:value="${type}" id="type" style="display:none"></input>

        <!-- 归档审核 -->
        <modal v-model="rejectModal" title="审核驳回" mask-closable="false">
            <div id="modalForm">
                <i-form ref="entityDataForm" :model="rejectForm" :label-width="120">
                    <form-item label="驳回至：">
                        <i-col span="12" style="padding-right:10px">
                            <i-select :model.sync="rejectForm.progress" v-model="rejectForm.progress" filterable
                                      clearable>
                                <i-option v-for="item in progresses" :value="item.value">{{ item.text }}</i-option>
                            </i-select>
                        </i-col>
                    </form-item>
                    <form-item label="驳回原因：" prop="organizationalName">
                        <i-input type="textarea" placeholder="请输入原因" v-model="rejectForm.reason"></i-input>
                    </form-item>

                </i-form>
            </div>
            <div slot="footer">
                <i-button type="success" @click="auditReject" style="margin-left: 8px">确认驳回</i-button>
                <i-button @click="auditRejectModelCancel" style="margin-left: 8px">取消</i-button>
            </div>
        </modal>
        <script src="js/filing/auditdetail.js"></script>
    </div>

</div>
</html>