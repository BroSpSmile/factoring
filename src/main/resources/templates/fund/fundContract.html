<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="layout/layout">
<div layout:fragment="content">
    <div id="fundContract" v-cloak>
        <row>
            <i-col span="22" offset="1">
                <br>
                <card dis-hover title="合同签署">
                    <i-form :label-width="140">
                        <form-item label="项目名称:">
                            <span>{{project.projectName}}</span>
                        </form-item>
                        <form-item label="合同附件:" v-if="items.length!=0">
                            <row v-for="item in items">
                                <i-col span="12">
                                    <span>
                                        <i-button type="dashed" icon="ios-cloud-download-outline" size="small"
                                                  @click="downloadItem(item)">
                                            {{item.itemName}}
                                        </i-button> &nbsp;
                                    </span>
                                </i-col>
                            </row>
                        </form-item>
                        <form-item label="上传合同附件:">
                            <Upload action="/file/upload" :on-success="uploadSuccess" :on-error="uploadError"
                                    :on-remove="removeFile">
                                <i-button size="small" icon="ios-cloud-upload-outline">上传文件</i-button>
                            </Upload>
                        </form-item>
                        <row v-for="(item,index)  in webItems">
                            <i-col span="10">
                                <form-item label="网页附件附件名称:">
                                    <i-input placeholder="附件名称" class="inputw"
                                             v-model="item.itemName"></i-input>
                                </form-item>
                            </i-col>
                            <i-col span="10">
                                <form-item label="网页附件附件地址:">
                                    <i-input placeholder="附件网页地址" class="inputw" v-model="item.itemValue">
                                    </i-input>
                                </form-item>
                            </i-col>
                            <i-col span="4">
                                <i-button type="success" shape="circle" size="small" ghost icon="md-add" v-if="index==0"
                                          @click="add">添加
                                </i-button>
                                <i-button type="error" shape="circle" size="small" ghost icon="md-close" v-if="index!=0"
                                          @click="remove(index)">删除
                                </i-button>
                            </i-col>
                        </row>
                        <row type="flex">
                            <i-col span="8" offset="1">
                                <i-button type="info" @click="commit">保存合同附件</i-button>
                                <i-button type="success" @click="pass">提交审核</i-button>
                            </i-col>
                        </row>
                    </i-form>
                </card>
            </i-col>
        </row>
        <input th:value="${id}" id="fundId" style="display:none"></input>
    </div>
    <script src="js/fund/fundContract.js"></script>
</div>
</html>